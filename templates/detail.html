{% extends "base.html" %}
{% block content %}
<a href="{{ url_for('home') }}" class="btn btn-secondary mb-3">← All Movies</a>
<div class="row">
  <div class="col-md-4">
    <img src="{{ movie.poster }}" class="img-fluid rounded">
  </div>
  <div class="col-md-8">
    <h2>{{ movie.title }} <small>({{ movie.year }})</small></h2>
    <p><strong>Genre:</strong> {{ movie.genre }}</p>
    <p><strong>Rating:</strong> {{ movie.rating }}</p>
    <p><strong>Runtime:</strong> {{ movie.runtime }} min</p>
    <p><strong>Director:</strong> {{ movie.director }}</p>
    <p><strong>Stars:</strong> {{ movie.actors | join(', ') }}</p>
    <p><strong>Summary:</strong> {{ movie.summary }}</p>
    <p><strong>Likes:</strong> {{ movie.likes }} | <strong>Dislikes:</strong> {{ movie.dislikes }}</p>
    <p><strong>Avg Rating:</strong> {{ movie.average_rating | round(1) }} ({{ movie.rating_count }} votes)</p>

    <form action="{{ url_for('add_to_my_list', movie_id=movie.id) }}" method="POST" class="mb-2">
      <button class="btn btn-primary">Add to My List</button>
    </form>

    <form action="{{ url_for('like_movie', movie_id=movie.id) }}" method="POST" class="d-inline">
      <button class="btn btn-success">👍 Like</button>
    </form>
    <form action="{{ url_for('dislike_movie', movie_id=movie.id) }}" method="POST" class="d-inline">
      <button class="btn btn-danger">👎 Dislike</button>
    </form>

    <form action="{{ url_for('rate_movie', movie_id=movie.id) }}" method="POST" class="mt-3">
      <label>Rate this movie (1-5):</label>
      <input type="number" name="rating" min="1" max="5">
      <button class="btn btn-warning">Submit Rating</button>
    </form>
  </div>
</div>
{% endblock %}
